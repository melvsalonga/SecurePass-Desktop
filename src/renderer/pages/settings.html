<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Settings - SecurePass Desktop</title>
  
  <!-- Content Security Policy for enhanced security -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
  
  <!-- Viewport for responsive design -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Accessibility metadata -->
  <meta name="description" content="SecurePass Desktop Settings - Configure security, appearance, and password generation preferences">
  
  <!-- CSS -->
  <link rel="stylesheet" href="../styles/themes.css">
  <link rel="stylesheet" href="../styles/main.css">
  <link rel="stylesheet" href="../styles/settings.css">
</head>
<body>
  <div id="app">
    <header class="app-header" role="banner">
      <h1>⚙️ Settings</h1>
      <div class="app-info">
        <nav class="app-nav" role="navigation" aria-label="Page navigation">
          <button id="back-home" class="btn btn-secondary" aria-label="Go back to home page">← Back to Home</button>
        </nav>
      </div>
    </header>
    
    <main class="app-main full-width" id="main-content" role="main">
      <div class="settings-container">
        <!-- General Settings -->
        <section class="settings-section" aria-labelledby="general-heading">
          <h2 id="general-heading">General Settings</h2>
          
          <fieldset class="setting-group" aria-labelledby="theme-group-heading">
            <legend><h3 id="theme-group-heading" class="sr-only">Theme Selection</h3></legend>
            <label for="theme-select">Theme:</label>
            <select id="theme-select" aria-describedby="theme-help">
              <option value="system">System Default</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
            <div id="theme-help" class="sr-only">Choose application theme: system default follows OS preference</div>
          </fieldset>
          
          <div class="setting-group">
            <label for="language-select">Language:</label>
            <select id="language-select">
              <option value="en">English</option>
              <option value="es">Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
            </select>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="start-minimized">
              Start minimized to system tray
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="minimize-to-tray">
              Minimize to system tray on close
            </label>
          </div>
        </section>
        
        <!-- Security Settings -->
        <section class="settings-section" aria-labelledby="security-heading">
          <h2 id="security-heading">Security Settings</h2>
          
          <fieldset class="setting-group" aria-labelledby="auto-lock-group">
            <legend><h3 id="auto-lock-group" class="sr-only">Auto-Lock Settings</h3></legend>
            <label for="auto-lock-timeout">Auto-lock timeout (minutes):</label>
            <div class="input-with-slider">
              <input type="range" id="auto-lock-timeout" min="1" max="60" value="15" 
                     aria-describedby="auto-lock-help" aria-labelledby="auto-lock-timeout-label">
              <span id="auto-lock-value" aria-live="polite">15</span>
              <div id="auto-lock-timeout-label" class="sr-only">Auto-lock timeout slider</div>
            </div>
            <div id="auto-lock-help" class="sr-only">Time in minutes before application locks automatically due to inactivity</div>
          </fieldset>
          
          <div class="setting-group">
            <label for="clipboard-timeout">Clipboard clear timeout (seconds):</label>
            <div class="input-with-slider">
              <input type="range" id="clipboard-timeout" min="10" max="120" value="30">
              <span id="clipboard-value">30</span>
            </div>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="show-password-strength">
              Show password strength meter
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="check-password-breaches">
              Check for password breaches (requires internet)
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="secure-desktop">
              Enable secure desktop mode
            </label>
          </div>
        </section>
        
        <!-- Password Generation Defaults -->
        <section class="settings-section">
          <h2>Password Generation Defaults</h2>
          
          <div class="setting-group">
            <label for="default-length">Default password length:</label>
            <div class="input-with-slider">
              <input type="range" id="default-length" min="8" max="128" value="16">
              <span id="default-length-value">16</span>
            </div>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="default-uppercase" checked>
              Include uppercase letters by default
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="default-lowercase" checked>
              Include lowercase letters by default
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="default-numbers" checked>
              Include numbers by default
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="default-symbols" checked>
              Include symbols by default
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="default-exclude-ambiguous" checked>
              Exclude ambiguous characters by default
            </label>
          </div>
        </section>
        
        <!-- Privacy Settings -->
        <section class="settings-section">
          <h2>Privacy Settings</h2>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="enable-analytics">
              Enable anonymous usage analytics
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="crash-reporting">
              Enable crash reporting
            </label>
          </div>
          
          <div class="setting-group">
            <label for="history-retention">Password history retention (days):</label>
            <div class="input-with-slider">
              <input type="range" id="history-retention" min="7" max="365" value="90">
              <span id="history-retention-value">90</span>
            </div>
          </div>
        </section>
        
        <!-- Advanced Settings -->
        <section class="settings-section">
          <h2>Advanced Settings</h2>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="hardware-acceleration">
              Enable hardware acceleration
            </label>
          </div>
          
          <div class="setting-group">
            <label>
              <input type="checkbox" id="debug-mode">
              Enable debug mode
            </label>
          </div>
          
          <div class="setting-group">
            <label for="memory-limit">Memory limit (MB):</label>
            <div class="input-with-slider">
              <input type="range" id="memory-limit" min="64" max="512" value="128">
              <span id="memory-limit-value">128</span>
            </div>
          </div>
          
          <div class="setting-group">
            <button id="reset-settings" class="btn btn-danger">Reset All Settings</button>
          </div>
        </section>
        
        <!-- Password Import/Export -->
        <section class="settings-section" aria-labelledby="import-export-heading">
          <h2 id="import-export-heading">Password Import/Export</h2>
          
          <div class="setting-group">
            <h3>Export Passwords</h3>
            <p>Export your password vault to backup or transfer to another application.</p>
            
            <fieldset class="export-options" aria-labelledby="export-format-legend">
              <legend id="export-format-legend">Export Format:</legend>
              <label>
                <input type="radio" name="export-format" value="json" checked 
                       aria-describedby="json-help">
                JSON (SecurePass format)
                <span id="json-help" class="sr-only">SecurePass native JSON format with full metadata</span>
              </label>
              <label>
                <input type="radio" name="export-format" value="csv" 
                       aria-describedby="csv-help">
                CSV (Universal format)
                <span id="csv-help" class="sr-only">Comma-separated values format compatible with most password managers</span>
              </label>
              <label>
                <input type="radio" name="export-format" value="xml" 
                       aria-describedby="xml-help">
                XML (Structured format)
                <span id="xml-help" class="sr-only">Structured XML format with hierarchical data organization</span>
              </label>
            </fieldset>
            
            <div class="export-security">
              <label>
                <input type="checkbox" id="include-passwords" checked>
                Include passwords in export (uncheck for metadata only)
              </label>
            </div>
            
            <button id="export-passwords" class="btn btn-secondary">Export Passwords</button>
          </div>
          
          <div class="setting-group">
            <h3>Import Passwords</h3>
            <p>Import passwords from another password manager or backup file.</p>
            
            <div class="import-options">
              <label>
                <input type="checkbox" id="check-duplicates" checked>
                Check for duplicate entries
              </label>
              <label>
                <input type="checkbox" id="skip-duplicates">
                Skip duplicates (otherwise update existing)
              </label>
            </div>
            
            <button id="import-passwords" class="btn btn-secondary">Import Passwords</button>
            <input type="file" id="import-file" accept=".json,.csv" style="display: none;">
          </div>
          
          <div class="import-help">
            <h4>Supported Formats:</h4>
            <ul>
              <li><strong>JSON:</strong> SecurePass native format or generic JSON</li>
              <li><strong>CSV:</strong> Common format with columns: Title, Username, Password, URL, Notes, Category</li>
            </ul>
            <p><em>Note: Always backup your existing vault before importing!</em></p>
          </div>
        </section>
        
        <!-- Action Buttons -->
        <section class="settings-actions" role="group" aria-label="Settings actions">
          <button id="save-settings" class="btn btn-primary" aria-describedby="save-help">
            Save Settings
            <span id="save-help" class="sr-only">Save all changed settings</span>
          </button>
          <button id="cancel-settings" class="btn btn-secondary" aria-label="Cancel changes and return to previous settings">
            Cancel
          </button>
          <button id="export-settings" class="btn btn-secondary" aria-describedby="export-settings-help">
            Export Settings
            <span id="export-settings-help" class="sr-only">Export current settings to a file</span>
          </button>
          <button id="import-settings" class="btn btn-secondary" aria-describedby="import-settings-help">
            Import Settings
            <span id="import-settings-help" class="sr-only">Import settings from a file</span>
          </button>
        </section>
      </div>
    </main>
    
    <!-- Notification area -->
    <div id="notification" class="notification" aria-live="assertive" aria-atomic="true" role="alert"></div>
  </div>
  
  <!-- JavaScript -->
  <script src="../js/accessibility-manager.js"></script>
  <script src="../js/theme-manager.js"></script>
  <script src="../js/keyboard-shortcuts-manager.js"></script>
  <script src="../js/settings.js"></script>
</body>
</html>
